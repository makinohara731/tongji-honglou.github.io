<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çº¢æ¥¼é›…è¶£ - çŸ¥è¯†é—®ç­”</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>tailwind.config = { theme: { extend: { colors: { 'red-dream': '#A62424', 'rice': '#F5F0E6' }, fontFamily: { 'song': ['SimSun', 'serif'] } } } }</script>
</head>
<body class="bg-rice font-song flex flex-col min-h-screen">
    
    <main class="container mx-auto px-4 py-10 flex-1 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-2xl w-full text-center">
            <h1 class="text-3xl font-bold text-red-dream mb-2"><i class="fa fa-puzzle-piece"></i> çº¢æ¥¼çŸ¥è¯†å°æµ‹</h1>
            <p class="text-gray-500 mb-8">å…± <span id="total-count">0</span> é¢˜</p>

            <div id="quiz-container">
                <h3 id="question-text" class="text-xl font-bold mb-6 min-h-[60px] flex items-center justify-center">é¢˜ç›®åŠ è½½ä¸­...</h3>
                <div id="options-area" class="space-y-3">
                    <!-- é€‰é¡¹æŒ‰é’® -->
                </div>
            </div>

            <div id="result-area" class="hidden">
                <div class="text-6xl mb-4" id="score-icon"></div>
                <h2 class="text-2xl font-bold mb-4" id="score-text"></h2>
                <button onclick="location.reload()" class="bg-red-dream text-white px-6 py-2 rounded hover:bg-red-800 transition">å†è¯•ä¸€æ¬¡</button>
            </div>
        </div>
    </main>

    <script src="../js/config.js"></script>
    <script src="../js/data.js"></script> <!-- é¢˜åº“åœ¨è¿™é‡Œ -->
    <script src="../js/navbar.js"></script>
    <script>
        let currentQ = 0;
        let score = 0;
        const total = QUIZ_DATA.length;

        document.getElementById('total-count').innerText = total;

        function loadQuestion() {
            if (currentQ >= total) {
                showResult();
                return;
            }
            const data = QUIZ_DATA[currentQ];
            document.getElementById('question-text').innerText = (currentQ + 1) + ". " + data.q;
            
            const optsDiv = document.getElementById('options-area');
            optsDiv.innerHTML = '';
            
            data.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "w-full border border-gray-300 p-3 rounded hover:bg-red-50 hover:border-red-dream transition text-left";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(idx, data.a);
                optsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selected, correct) {
            if (selected === correct) score++;
            currentQ++;
            loadQuestion();
        }

        function showResult() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('result-area').classList.remove('hidden');
            
            const resultText = document.getElementById('score-text');
            const resultIcon = document.getElementById('score-icon');
            
            resultText.innerText = `ç­”å¯¹ ${score} / ${total} é¢˜`;
            if (score === total) {
                resultIcon.innerHTML = "ğŸ†";
                resultText.innerText += " - å¤ªæ£’äº†ï¼Œä½ æ˜¯çº¢æ¥¼å­¦è€…ï¼";
            } else if (score > total / 2) {
                resultIcon.innerHTML = "ğŸ“š";
                resultText.innerText += " - ä¸é”™ï¼Œç»§ç»­åŠªåŠ›ï¼";
            } else {
                resultIcon.innerHTML = "ğŸ’ª";
                resultText.innerText += " - éœ€è¦å›å»é‡è¯»åŸè‘—å“¦ï¼";
            }
        }

        loadQuestion();
    </script>
</body>
</html>
